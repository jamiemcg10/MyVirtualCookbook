{"version":3,"sources":["App/Components/Logo.js","App/Components/Header.js","App/pages/HowItWorks.js","App/Components/Icons/OrganizeIcon.js","App/Components/Icons/TakeNotesIcon.js","App/Components/Icons/AddRecipeIcon.js","App/pages/Home.js","App/Components/AddChapterDialog.js","App/Components/AddRecipeDialog.js","App/Components/CustomContextMenu.js","App/Components/RenameChapterRecipeDialog.js","App/Components/DeleteChapterRecipeDialog.js","App/Components/Recipe.js","App/Components/Chapter.js","App/Components/CookiePopupWarning.js","App/pages/Cookbook.js","App/pages/Notes.js","App/pages/NotFound.js","App/pages/Page.js","App/pages/Login.js","App/pages/Signup.js","App/App.js","serviceWorker.js","index.js","App/modules/createRequest.js","App/modules/checkInput.js","Images/g-logo.png","Images/facebook-logo.png","App/modules/accessNotes.js"],"names":["Logo","className","Component","Header","props","state","userLoggedIn","username","type","createRequest","require","checkLoginRequest","this","fetch","then","response","json","setState","validUser","name","catch","error","logErrorRequest","createRequestWithBody","JSON","stringify","text","id","href","class","HowItWorks","OrganizeIcon","TakeNotesIcon","AddRecipeIcon","Home","Card","Button","variant","AddChapterDialog","hitEnter","event","key","saveBtn","current","click","addChapter","errorMsg","newChapterText","chapterNameValue","checkInput","isValidItemName","newChapterRequest","process","success","showAddChapterDialog","rerenderCookbook","message","cancelChapterAdd","handleChange","target","value","React","createRef","chapterName","childNodes","focus","document","addEventListener","removeEventListener","ClickAwayListener","onClickAway","TextField","label","size","onChange","ref","onClick","AddRecipeDialog","getChapters","chapters","getChaptersRequest","length","push","NEW_CHAPTER","chapterNames","recipeChapterValue","addRecipe","newRecipeName","recipeNameValue","newRecipeLink","recipeLinkValue","newRecipeChapter","newChapterNameValue","isValidLink","requestBody","link","chapter","source","newRecipeRequest","showAddRecipeDialog","cancelRecipeAdd","handleNameChange","handleLinkChange","handleChapterChange","handleNewChapterChange","recipeName","chapterList","FormControl","InputLabel","htmlFor","NativeSelect","defaultValue","inputProps","map","replaceAll","CustomContextMenu","Paper","showContextMenu","MenuList","MenuItem","renameItem","fontSize","deleteItem","RenameChapterRecipeDialog","changeItem","hasInjection","newNameValue","textToModify","itemTypeToModify","changeChapterRequest","showRenameChapterRecipeDialog","changeRecipeRequest","recipeChapter","cancelRename","DeleteChapterRecipeDialog","deleteRequest","itemTypeToDelete","textToDelete","showDeleteChapterRecipeDialog","cancelDelete","Recipe","showNotes","notesOpen","displayRecipe","a","methodChanged","notesDisabled","recipe","method","iframeStillValidRequest","recipeLink","changeOpeningMethodRequest","nameId","recipeWindow","window","open","content","location","notes","getElementsByTagName","notesWindow","handleNotesChange","accessNotes","updateNotes","recipeNotes","recipeId","dragId","draggableId","index","provided","innerRef","draggableProps","dragHandleProps","recipetype","chaptername","itemType","onContextMenu","sendRightClick","alt","notesopen","disabled","Chapter","chapterRef","recipesRef","recipesNode","chapterNode","getAttribute","setAttribute","chapterExpanded","recipes","droppableId","droppableProps","chapterexpanded","toggleChapter","rightClick","preventDefault","chapteropen","_id","placeholder","CookiePopupWarning","acceptWarning","acceptCookieRequest","showCookiePopupWarning","acceptCookies","warningAccepted","Cookbook","displayAddChapterWindow","bool","showAddChapter","displayAddRecipeWindow","showAddRecipe","displayContextMenu","displayRenameDialog","showRename","displayDeleteDialog","showDelete","getCookbook","recipeRequest","cookbook","filterCookbook","filterText","searchText","toLowerCase","cookbookCopy","_","cloneDeep","filteredCookbook","i","indexOf","j","showMenu","innerText","menuStyle","top","clientY","left","clientX","handleSearchBarChange","searchbarValue","handleOnDragEnd","result","destination","oldChapter","find","recipeIndex","newRecipeIndex","newChapter","nRecipe","recipeCopy","splice","checkCookieAcceptance","checkCookieRequest","cookiesAccepted","hash","body","customContextMenu","style","InputProps","startAdornment","InputAdornment","position","onDragEnd","accepted","Notes","getNotes","getNotesRequest","match","params","NotFound","Page","getRecipe","url","recipeIsValid","src","title","Login","loginBtnRef","googleLogin","facebookLogin","localLogin","isValidEmail","emailValue","isValidPassword","passwordValue","md5Password","md5","loginRequest","errorText","password","email","handleEmailChange","handlePasswordChange","emailRef","elevation","Grid","container","direction","justify","googleLogo","facebookLogo","Signup","signupBtnRef","localSignup","firstName","confirmPassword","confirm","newUserRequest","handleFirstNameChange","handleConfirmPasswordChange","firstNameRef","App","exact","path","component","Boolean","hostname","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","console","module","exports","address","Request","mode","redirect","credentials","headers","string","RegExp","test","containsOnlyAlphaNumericDashPeriodAt","lastIndexOf","log","containsOnlyAlphaNumeric","item","containsOnlyAlphaNumericDash","isAdmin","hasDollarSign","updateNotesRequest"],"mappings":"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","file":"static/js/main.68f43fa1.chunk.js","sourcesContent":["import React, {Component} from 'react';\r\n\r\nclass Logo extends Component {\r\n    render(){\r\n        \r\n        return(\r\n            <h1 className=\"logo\"><span className=\"logoSpan\">My </span>Virtual Cookbook</h1>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Logo;","import React, { Component } from 'react';\r\nimport Logo from './Logo.js';\r\nimport './styles/Header.css';\r\n\r\n// display header\r\nclass Header extends Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            userLoggedIn: false,\r\n            username: '',\r\n            type: this.props.type || \"header\"\r\n        };\r\n\r\n        this.createRequest = require('../modules/createRequest.js');\r\n    }\r\n\r\n    componentDidMount(){\r\n        let checkLoginRequest = this.createRequest.createRequest(\"/api/user/checklogin\", \"GET\");\r\n        fetch(checkLoginRequest)\r\n            .then(\r\n                (response)=>{\r\n                    response.json().then(\r\n                        (json)=>{\r\n                            this.setState({\r\n                                userLoggedIn: json.validUser,\r\n                                username: json.name\r\n                            });\r\n                        })\r\n                })\r\n            .catch((error)=>{\r\n                let logErrorRequest = this.createRequest.createRequestWithBody(\"/api/log\", \"POST\", JSON.stringify({text: error}));\r\n                fetch(logErrorRequest);\r\n            });\r\n    }\r\n\r\n    render(){\r\n        if (this.state.userLoggedIn) {  // if user is logged in, show greeting and link to log out\r\n            return (\r\n                <div className={ this.state.type }>\r\n                    <div><a id=\"logo-link\" href={'/main'}><Logo /></a></div>\r\n                    <div>Hi, {this.state.username}! | <a href=\"/logout\" id=\"logout-link\">Log Out</a></div>\r\n                </div>\r\n            );\r\n        } else {  // user is not logged in - show options to sign up or login\r\n            return (\r\n                <div className={ this.state.type }>\r\n                    <div><a id=\"logo-link\" href={'./'}><Logo /></a></div>\r\n                    <div><a href=\"/signup\" class=\"header-link\" id=\"signup-link\">Sign Up</a> | <a href=\"./login\" class=\"header-link\" id=\"login-link\">Log In</a></div> \r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default Header;","import React, {Component} from 'react';\r\nimport Header from '../Components/Header.js';\r\n\r\nclass HowItWorks extends Component{\r\n\r\n    render(){\r\n        return(\r\n            <div className = \"App\">\r\n                <Header />\r\n                <h1 className=\"pageTitle\">How it works</h1>\r\n                <ol>\r\n                    <li>Sign up for an account. You can create an account using your email address and a password you create or using your Gmail account</li>\r\n                    <li>Add recipes to your chapters in your virtual cookbook. You can create as many chapters as you need and re-name them whenever you want</li>\r\n                    <li>You can drag and drop recipes from one chapter to another. It’s your cookbook! You can decide how your recipes will be organized</li>\r\n                    <li>There are notes attached to each recipe. You can access them from the table of contents or from each recipe page. You can add notes on what works, what doesn’t work, what you changed, or whatever you want!</li>\r\n                    <li>Your recipes will automatically open in a new tab. A separate window will pop-up for your notes</li>\r\n                    <li>Some recipes will automatically open in a new tab. When this happens, a separate window will pop-up for your notes</li>\r\n                </ol>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default HowItWorks;","\r\nimport React, { Component } from 'react';\r\nimport FolderIcon from '@material-ui/icons/Folder';\r\nimport ListAltIcon from '@material-ui/icons/ListAlt';\r\nimport ArrowRightAlt from '@material-ui/icons/ArrowRightAlt';\r\nimport './styles/OrganizeIcon.css'\r\n\r\nclass OrganizeIcon extends Component {\r\n    render(){\r\n        return (\r\n            <div id=\"oi-container\">\r\n                <ListAltIcon\r\n                    id=\"oi-book\"\r\n                ></ListAltIcon>\r\n                    <div id=\"oi-arrows\">\r\n                        <ArrowRightAlt id=\"oi-up-arrow\"></ArrowRightAlt>\r\n                        <ArrowRightAlt id=\"oi-str-arrow\"></ArrowRightAlt>\r\n                        <ArrowRightAlt id=\"oi-down-arrow\"></ArrowRightAlt>\r\n                    </div>\r\n                    <div id=\"oi-folders\">\r\n                        <FolderIcon className=\"oi-folder\"></FolderIcon>\r\n                        <FolderIcon className=\"oi-folder\"></FolderIcon>\r\n                        <FolderIcon className=\"oi-folder\"></FolderIcon>\r\n                    </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default OrganizeIcon;","\r\nimport React, { Component } from 'react';\r\nimport CreateIcon from '@material-ui/icons/Create'\r\nimport ListAltIcon from '@material-ui/icons/ListAlt';\r\nimport './styles/TakeNotesIcon.css'\r\n\r\nclass TakeNotesIcon extends Component {\r\n    render(){\r\n        return (\r\n            <div id=\"tni-container\">\r\n                <ListAltIcon id=\"tni-paper\"></ListAltIcon>\r\n                <CreateIcon id=\"tni-pencil\"></CreateIcon>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TakeNotesIcon;","\r\nimport React, { Component } from 'react';\r\nimport ListAltIcon from '@material-ui/icons/ListAlt';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport './styles/AddRecipeIcon.css'\r\n\r\nclass AddRecipeIcon extends Component {\r\n    render(){\r\n        return (\r\n            <div id=\"ari-container\">\r\n                <ListAltIcon id=\"ari-paper\"></ListAltIcon>\r\n                <AddIcon id=\"ari-add\"></AddIcon>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AddRecipeIcon;","import React, { Component } from 'react';\r\nimport Logo from '../Components/Logo.js';\r\nimport OrganizeIcon from '../Components/Icons/OrganizeIcon.js';\r\nimport TakeNotesIcon from '../Components/Icons/TakeNotesIcon.js';\r\nimport AddRecipeIcon from '../Components/Icons/AddRecipeIcon.js';\r\nimport { Button, Card } from '@material-ui/core';\r\nimport './styles/Home.css';\r\n\r\n// /home\r\nclass Home extends Component {\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"App\">\r\n                <div className=\"mainPageLogo\"><Logo /></div>\r\n                <div className=\"tile-box flex-container\">\r\n                    <Card className=\"tile\">\r\n                        <AddRecipeIcon></AddRecipeIcon>\r\n                        Add recipes\r\n                    </Card>\r\n                    <Card className=\"tile\">\r\n                        <OrganizeIcon></OrganizeIcon>\r\n                        Organize\r\n                    </Card>\r\n                    <Card className=\"tile\">\r\n                        <TakeNotesIcon></TakeNotesIcon>\r\n                        Take notes\r\n                    </Card>\r\n                </div>\r\n                <div className=\"flex-container home-btn-box\">\r\n                <a href={'./about'}>\r\n                        <Button\r\n                            id=\"learn-more-btn\"\r\n                            className=\"btn btn--home btn--green\"\r\n                            variant=\"contained\"\r\n                        >\r\n                            Learn more\r\n                        </Button>\r\n                    </a>\r\n                    <a href={'./signup'}>\r\n                        <Button\r\n                            id=\"signup-btn\" \r\n                            className=\"btn btn--home btn--white\"\r\n                            variant=\"contained\"\r\n                        >\r\n                            Sign up\r\n                        </Button>\r\n                    </a>\r\n                    <a href={'./login'}>\r\n                        <Button\r\n                            id=\"login-btn\" \r\n                            className=\"btn btn--home btn--yellow\"\r\n                            variant=\"contained\"\r\n                        >\r\n                            Log in\r\n                        </Button>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Home;","import React, { Component } from \"react\";\r\nimport { Button, TextField, ClickAwayListener } from '@material-ui/core'\r\nimport './styles/AddChapterRecipeDialog.css'\r\n\r\n\r\n// window for adding a chapter to the cookbook\r\nclass AddChapterDialog extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            chapterNameValue: '',\r\n            errorMsg: ''\r\n        };\r\n\r\n        // import modules\r\n        this.checkInput = require('../modules/checkInput.js');\r\n        this.createRequest = require('../modules/createRequest.js');\r\n\r\n        this.saveBtn = React.createRef();\r\n        this.chapterName = React.createRef();\r\n    }\r\n\r\n    componentDidMount(){\r\n        let chapterNameInput = this.chapterName.current.childNodes[1].childNodes[0];\r\n        chapterNameInput.focus()\r\n        document.addEventListener(\"keyup\", this.hitEnter);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        document.removeEventListener(\"keyup\", this.hitEnter);\r\n    }\r\n\r\n    hitEnter = (event) => {\r\n        if (event.key === \"Enter\"){\r\n            this.saveBtn.current.click();\r\n        }\r\n    }\r\n\r\n    addChapter = () => {\r\n            this.setState({\r\n                errorMsg: ''\r\n            });\r\n\r\n            let newChapterText = this.state.chapterNameValue;\r\n            if (!this.checkInput.isValidItemName(newChapterText)){  // don't allow invalid chapter names\r\n                this.setState({\r\n                    errorMsg: \"That chapter name is invalid\"\r\n                });\r\n                return;\r\n            } else {\r\n                let newChapterRequest =this.createRequest.createRequest(`${process.env.REACT_APP_SITE_ADDRESS}/api/chapter/add/${newChapterText}`, 'POST');\r\n                fetch(newChapterRequest).then(\r\n                    (response) => {response.json().then((json) => {\r\n                        if (json.success){\r\n                            this.props.showAddChapterDialog(false);\r\n                            this.props.rerenderCookbook();\r\n                        } else {\r\n                            this.setState({\r\n                                errorMsg: json.message\r\n                            });\r\n                        }\r\n                    })}\r\n                ).catch(error=>{\r\n                    let logErrorRequest = this.createRequest.createRequestWithBody(\"/api/log\", \"POST\", JSON.stringify({text: error}));\r\n                    fetch(logErrorRequest);\r\n                });\r\n            }\r\n    }\r\n\r\n    cancelChapterAdd = () => {\r\n            this.props.showAddChapterDialog(false);\r\n    }\r\n\r\n    handleChange = (event) => {  // change value of chapter name textbox\r\n        this.setState({\r\n            chapterNameValue: event.target.value,\r\n        });\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div id=\"dialog-background\">\r\n                <ClickAwayListener\r\n                    onClickAway={ () => {this.props.showAddChapterDialog(false)} }\r\n                >\r\n                    <div id=\"add-chapter-dialog\" className=\"dialog\">\r\n                        <p className=\"dialog-title\">Add chapter</p>\r\n                        <div id=\"chapter-name-box\">\r\n                        <TextField\r\n                            label=\"Chapter name\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            value={this.state.value}\r\n                            onChange={this.handleChange}\r\n                            ref={this.chapterName}\r\n                        ></TextField>\r\n                            <p className=\"error\" id=\"error\">{this.state.errorMsg}</p>\r\n                        </div>\r\n                        <div className=\"flex-container chapter-btns\">\r\n                            <Button \r\n                                className=\"btn btn--yellow\"\r\n                                variant=\"contained\"\r\n                                ref={this.saveBtn}\r\n                                onClick={this.addChapter}\r\n                            >\r\n                                Save\r\n                            </Button>\r\n                            <Button \r\n                                className=\"btn --btn--white\"\r\n                                variant=\"contained\"\r\n                                onClick={this.cancelChapterAdd}\r\n                            >\r\n                                Cancel\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </ClickAwayListener>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default AddChapterDialog;","import React, {Component} from \"react\";\r\nimport { TextField, InputLabel, Button, FormControl, NativeSelect, ClickAwayListener } from '@material-ui/core'\r\nimport './styles/AddChapterRecipeDialog.css'\r\n\r\nclass AddRecipeDialog extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            chapterNames: [],\r\n            recipeNameValue: '',\r\n            recipeLinkValue: '',\r\n            recipeChapterValue: '',\r\n            newChapterNameValue: '',\r\n            errorMsg: ''\r\n        };\r\n\r\n        this.saveBtn = React.createRef();\r\n        this.recipeName = React.createRef();\r\n    \r\n        // import modules\r\n        this.createRequest = require('../modules/createRequest.js');\r\n        this.checkInput = require('../modules/checkInput.js');\r\n\r\n        this.NEW_CHAPTER = \"< + New Chapter >\";  // value for new chapter dropdown item\r\n    }\r\n\r\n    componentDidMount(){\r\n        let recipeNameInput = this.recipeName.current.childNodes[1].childNodes[0];\r\n        recipeNameInput.focus()\r\n\r\n        this.getChapters();  // get a list of chapters to display in the dropdown\r\n\r\n        // save recipe if Enter key pressed\r\n        document.addEventListener(\"keyup\", this.hitEnter);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        document.removeEventListener(\"keyup\", this.hitEnter)\r\n    }\r\n\r\n    hitEnter = (event) => {\r\n        if (event.key === \"Enter\"){\r\n            this.saveBtn.current.click();\r\n        }\r\n    }\r\n\r\n    getChapters = () => {\r\n        // get a list of chapters in the cookbook\r\n        let chapters=\"\";\r\n        let getChaptersRequest = this.createRequest.createRequest(`${process.env.REACT_APP_SITE_ADDRESS}/api/chapters`, 'GET');\r\n        fetch(getChaptersRequest).then(\r\n            (response)=>{\r\n                response.json().then((json)=>{\r\n                    if (json.success){\r\n                        chapters = json.chapters;\r\n                        if (chapters.length === 0){ // recipes must be added to a chapter\r\n                            chapters.push(\"[Unclassified]\");\r\n                        }\r\n                        chapters.push(this.NEW_CHAPTER);\r\n                        this.setState({\r\n                            chapterNames: chapters,\r\n                            recipeChapterValue: chapters[0]\r\n                        });\r\n                        return;\r\n                    } else {\r\n                        // there was a problem getting the chapters - show a message\r\n                        this.setState({\r\n                            errorMsg: json.message,\r\n                        });\r\n                        return;\r\n                    }\r\n                })\r\n            }).catch(error=>{\r\n                let logErrorRequest = this.createRequest.createRequestWithBody(\"/api/log\", \"POST\", JSON.stringify({text: error}));\r\n                    fetch(logErrorRequest);\r\n            });\r\n\r\n    }\r\n\r\n    addRecipe = () => {\r\n        // adds recipe to cookbook\r\n        this.setState({  // reset error message when called\r\n            errorMsg: '',\r\n        });\r\n\r\n        let newRecipeName = this.state.recipeNameValue;\r\n        let newRecipeLink = this.state.recipeLinkValue;\r\n        let newRecipeChapter = this.state.newChapterNameValue || this.state.recipeChapterValue;  // add to new chapter or existing chapter\r\n\r\n        if (!this.checkInput.isValidItemName(newRecipeName)){  // validate recipe name\r\n            this.setState({\r\n                errorMsg: 'Please enter a valid recipe name',\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (!this.checkInput.isValidLink(newRecipeLink)){  // validate recipe link\r\n            this.setState({\r\n                errorMsg: 'Please enter a valid link',\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (this.state.newChapterNameValue && !this.checkInput.isValidItemName(newRecipeChapter)){  // validate chapter name if new chapter\r\n            this.setState({\r\n                errorMsg: 'Please enter a valid chapter name',\r\n            });\r\n            return;\r\n        }\r\n\r\n        let requestBody = {\r\n            name: newRecipeName,\r\n            link: newRecipeLink,\r\n            chapter: newRecipeChapter,\r\n            source: \"link\"  // TODO: change if img uploads are allowed\r\n        };\r\n        requestBody = JSON.stringify(requestBody);\r\n\r\n        let newRecipeRequest = this.createRequest.createRequestWithBody(`${process.env.REACT_APP_SITE_ADDRESS}/api/recipe/add`, 'POST', requestBody);\r\n        fetch(newRecipeRequest)\r\n            .then((response) => {\r\n                response.json().then((json) => {\r\n                    if (json.success){  // close window and re-render cookbook if adding was successful\r\n                        this.props.showAddRecipeDialog(false);\r\n                        this.props.rerenderCookbook();\r\n                    } else {\r\n                        this.setState({  // else display the error message\r\n                            errorMsg: json.message\r\n                        });\r\n\r\n                    }\r\n                }).catch(error=>{\r\n                    let logErrorRequest = this.createRequest.createRequestWithBody(\"/api/log\", \"POST\", JSON.stringify({text: error}));\r\n                    fetch(logErrorRequest);\r\n                });\r\n            });\r\n\r\n    }\r\n\r\n    cancelRecipeAdd = () => {\r\n        this.props.showAddRecipeDialog(false);\r\n    }\r\n\r\n    handleNameChange = (event) => {  // holds the value in the recipe name box\r\n        this.setState({\r\n            recipeNameValue: event.target.value,\r\n        })\r\n    }\r\n\r\n    handleLinkChange = (event) => {  // holds the value in the recipe link box\r\n        this.setState({\r\n            recipeLinkValue: event.target.value,\r\n        });\r\n    }\r\n\r\n    handleChapterChange = (event) => {  // holds the value in the chapter dropdown\r\n        if (this.state.newChapterNameValue !== this.NEW_CHAPTER){ // if the chapter recipe is being added to isn't new, set the new chapter name to null\r\n            this.setState({\r\n                newChapterNameValue: ''\r\n            });\r\n        }\r\n        this.setState({\r\n            recipeChapterValue: event.target.value,\r\n        });\r\n    }\r\n\r\n    handleNewChapterChange = (event) => {  // holds the value in the new chapter name box\r\n        this.setState({\r\n            newChapterNameValue: event.target.value,\r\n        });\r\n    }\r\n\r\n\r\n    render(){        \r\n        let chapterList = this.state.chapterNames;\r\n\r\n        return(\r\n            <div id=\"dialog-background\">\r\n                <ClickAwayListener\r\n                    onClickAway={() => {this.props.showAddRecipeDialog(false)}}\r\n                >\r\n                <div \r\n                    id=\"add-recipe-dialog\" \r\n                    className=\"dialog\"> \r\n                    <p className=\"dialog-title\">Add recipe</p>\r\n                    <div id=\"recipe-name-box\">\r\n                        <TextField\r\n                            label=\"Recipe name\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            className=\"add-recipe-input\"\r\n                            ref={this.recipeName}\r\n                            onChange={this.handleNameChange}\r\n                        ></TextField>\r\n                        <TextField\r\n                            id=\"recipe-link\" \r\n                            label=\"Recipe link\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            className=\"add-recipe-input\" \r\n                            onChange={this.handleLinkChange}\r\n                        ></TextField>\r\n                        <FormControl>\r\n                            <InputLabel variant=\"standard\" htmlFor=\"chapter-select\">Chapter</InputLabel>\r\n                            <NativeSelect\r\n                                defaultValue={chapterList[0]}\r\n                                inputProps={{\r\n                                    name: 'Chapter',\r\n                                    id: 'chapter-select',\r\n                                    className: 'chapter-select',\r\n                                    onChange: this.handleChapterChange,\r\n                                }}\r\n                            >\r\n                                { chapterList.map((chapter) => \r\n                                                \r\n                                        <option key={chapter.replaceAll(\" \")}>\r\n                                            { chapter }\r\n                                        </option>\r\n                                    \r\n                                )}\r\n                            </NativeSelect>\r\n                        </FormControl>\r\n\r\n                        {this.state.recipeChapterValue === this.NEW_CHAPTER &&   \r\n                            <div id=\"new-chapter-div\">\r\n                                <TextField\r\n                                    id=\"new-chapter-name\" \r\n                                    label=\"New chapter name\"\r\n                                    variant=\"outlined\"\r\n                                    size=\"small\"\r\n                                    className=\"add-recipe-input\" \r\n                                    onChange={this.handleNewChapterChange}\r\n                                ></TextField>\r\n                            </div>\r\n                        }\r\n                        <p className=\"error\" id=\"error\">{this.state.errorMsg}</p>\r\n                    </div>\r\n                    <div className=\"flex-container recipe-btns\">\r\n                        <Button \r\n                            className=\"btn btn--yellow\"\r\n                            ref={this.saveBtn}\r\n                            variant=\"contained\"\r\n                            onClick={this.addRecipe}\r\n                        >\r\n                            Save\r\n                        </Button>\r\n                        <Button \r\n                            className=\"btn btn--white\"\r\n                            variant=\"contained\"\r\n                            onClick={this.cancelRecipeAdd}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                    </div>\r\n                </div> \r\n            </ClickAwayListener>\r\n        </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default AddRecipeDialog;","import React, { Component } from 'react';\r\nimport { MenuList, MenuItem, Paper, ClickAwayListener } from '@material-ui/core'\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport './styles/CustomContextMenu.css'\r\n\r\n// renders right click menu for cookbook\r\nclass CustomContextMenu extends Component {\r\n\r\n\r\nrender(){\r\n    return(\r\n        <Paper\r\n            id=\"menu\"\r\n        >\r\n            <ClickAwayListener onClickAway={ ()=>{this.props.showContextMenu(false)} }>\r\n                <MenuList>\r\n                    <MenuItem\r\n                        className=\"menu\"\r\n                        onClick={ ()=>{this.props.showContextMenu(false); this.props.renameItem(true);} }\r\n                    >\r\n                        <EditIcon fontSize=\"small\"></EditIcon>\r\n                        &nbsp;Rename\r\n                    </MenuItem>\r\n                    <MenuItem\r\n                        className=\"menu\"\r\n                        onClick={ ()=>{this.props.showContextMenu(false); this.props.deleteItem(true);} }\r\n                    >\r\n                        <DeleteIcon fontSize=\"small\"></DeleteIcon>\r\n                        &nbsp;Delete\r\n                    </MenuItem>\r\n                </MenuList>\r\n            </ClickAwayListener>\r\n        </Paper>\r\n\r\n    );\r\n};\r\n\r\n\r\n}  // end CustomContextMenu class\r\n\r\n\r\nexport default CustomContextMenu;","import React, { Component } from \"react\";\r\nimport { Button, ClickAwayListener, TextField } from '@material-ui/core'\r\nimport './styles/DeleteRenameChapterRecipeDialog.css'\r\n\r\n// dialog window to rename an existing chapter\r\nclass RenameChapterRecipeDialog extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            newNameValue: this.props.textToModify,\r\n            errorMsg: ''\r\n        };\r\n\r\n\r\n        // import modules\r\n        this.checkInput = require('../modules/checkInput.js');\r\n        this.createRequest = require('../modules/createRequest.js');\r\n\r\n        this.saveBtn = React.createRef();\r\n        this.chapterName = React.createRef();\r\n    }\r\n\r\n    componentDidMount(){\r\n        document.addEventListener(\"keyup\", this.hitEnter);\r\n        let chapterNameInput = this.chapterName.current.childNodes[1].childNodes[0];\r\n        chapterNameInput.focus();  // put cursor in chapter name box when component loads\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        document.removeEventListener(\"keyup\", this.hitEnter);\r\n    }\r\n    hitEnter = (event) => {\r\n        if (event.key === \"Enter\"){\r\n            this.saveBtn.current.click();\r\n        }\r\n    }\r\n\r\n    changeItem = () => {\r\n        this.setState({\r\n            errorMsg: ''\r\n        });\r\n        if (this.checkInput.hasInjection(this.state.newNameValue)){ \r\n            this.setState({\r\n                errorMsg: 'Please enter a valid chapter name'\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (this.state.newNameValue === this.props.textToModify){  // text is the same\r\n            this.props.showRenameChapterRecipeDialog(false);\r\n            // no need to rerender\r\n            return;\r\n        }\r\n\r\n        if (this.props.itemTypeToModify === 'chapter'){  // rename chapter\r\n            let changeChapterRequest = this.createRequest.createRequest(`/api/chapter/rename/${this.props.textToModify}/${this.state.newNameValue}`, 'PUT');\r\n            fetch(changeChapterRequest).then((response)=>{response.json().then(json => {\r\n                if (json.success){  // rename was successful - close dialog and redisplay cookbook\r\n                    this.props.showRenameChapterRecipeDialog(false);\r\n                    this.props.rerenderCookbook();\r\n                } else {  // show error\r\n                    this.setState({\r\n                        errorMsg: json.message\r\n                    });\r\n                }\r\n            })})\r\n            .catch(error=>{\r\n                let logErrorRequest = this.createRequest.createRequestWithBody(\"/api/log\", \"POST\", JSON.stringify({text: error}));\r\n                fetch(logErrorRequest);\r\n            });\r\n        \r\n        } else if (this.props.itemTypeToModify === 'recipe'){  // rename recipe\r\n            let changeRecipeRequest = this.createRequest.createRequest(`/api/recipe/rename/${this.props.textToModify}/${this.props.recipeChapter}/${this.state.newNameValue}`, 'PUT');\r\n            fetch(changeRecipeRequest).then((response)=>{response.json().then(json => {\r\n                if (json.success){  // rename was successful - close dialog and redisplay cookbook\r\n                    this.props.showRenameChapterRecipeDialog(false);\r\n                    this.props.rerenderCookbook();\r\n                } else {  // show error\r\n                    this.setState({\r\n                        errorMsg: json.message\r\n                    });\r\n                }\r\n            })})\r\n            .catch(error=>{\r\n                this.setState({\r\n                    errorMsg: 'Sorry, something went wrong. Please try again later.'\r\n                });\r\n                let logErrorRequest = this.createRequest.createRequestWithBody(\"/api/log\", \"POST\", JSON.stringify({text: error}));\r\n                fetch(logErrorRequest);\r\n            });\r\n        } else{\r\n            // there's an error - either a chapter or recipe should have been selected\r\n            this.setState({\r\n                errorMsg: 'Sorry, something went wrong. Please try again later.'\r\n            });\r\n        }\r\n    }\r\n\r\n    cancelRename = () => {\r\n        this.props.showRenameChapterRecipeDialog(false);\r\n\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({\r\n            newNameValue: event.target.value,\r\n        });\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div id=\"dialog-background\">\r\n                <ClickAwayListener\r\n                    onClickAway={() => this.props.showRenameChapterRecipeDialog(false)}\r\n                >\r\n                    <div id=\"rename-dialog\" className=\"dialog\">\r\n                        <p className=\"dialog-title\">Rename {this.props.itemTypeToModify}</p>\r\n                        <div id=\"rename-box\">\r\n                            <TextField\r\n                                id=\"chapter-recipe-name\"\r\n                                label=\"New name\"\r\n                                variant=\"outlined\"\r\n                                size=\"small\"\r\n                                ref={this.chapterName}\r\n                                value={this.state.newNameValue}\r\n                                onChange={this.handleChange}\r\n                            ></TextField>\r\n                            <p className=\"error\" id=\"error\">{this.state.errorMsg}</p>\r\n                        </div>\r\n                        <div className=\"flex-container chapter-btns\">\r\n                            <Button \r\n                                id=\"rename-save\" \r\n                                variant=\"contained\"\r\n                                onClick={this.changeItem}\r\n                            >\r\n                                    Rename\r\n                            </Button>\r\n                            <Button \r\n                                id=\"rename-cancel\" \r\n                                variant=\"contained\"\r\n                                onClick={this.cancelRename}\r\n                            >\r\n                                Cancel\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </ClickAwayListener>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default RenameChapterRecipeDialog;","import React, { Component } from \"react\";\r\nimport { Button, ClickAwayListener } from '@material-ui/core';\r\nimport './styles/DeleteRenameChapterRecipeDialog.css'\r\n\r\n// window to confirm deleting a chapter\r\nclass DeleteChapterRecipeDialog extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            errorMsg: ''\r\n        };\r\n\r\n        // import modules\r\n        this.createRequest = require('../modules/createRequest.js');\r\n\r\n        this.saveBtn = React.createRef();\r\n    }\r\n\r\n    componentDidMount(){\r\n        // add event listener to click Delete button if user hits enter key\r\n        document.addEventListener(\"keyup\", this.hitEnter);\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        document.removeEventListener(\"keyup\", this.hitEnter);\r\n    }\r\n\r\n    hitEnter = (event) => {\r\n        if (event.key === \"Enter\"){\r\n            this.saveBtn.current.click();\r\n        }\r\n    }\r\n\r\n    deleteItem = () => {\r\n        let deleteRequest;\r\n\r\n        if (!(this.props.itemTypeToDelete === 'chapter' || this.props.itemTypeToDelete === 'recipe')){\r\n            // there's an error - either a chapter or recipe should have been selected\r\n            this.setState({\r\n                errorMsg: 'Something went wrong. Please try again later.'\r\n            })\r\n            return;\r\n        } else if (this.props.itemTypeToDelete === 'chapter'){ // delete chapter\r\n            deleteRequest = this.createRequest.createRequest(`/api/chapter/delete/${this.props.textToDelete}`, 'DELETE');\r\n\r\n        } else if (this.props.itemTypeToDelete === 'recipe'){  // delete recipe\r\n            deleteRequest = this.createRequest.createRequest(`/api/recipe/delete/${this.props.recipeChapter}/${this.props.textToDelete}`, 'DELETE');\r\n        }\r\n\r\n        fetch(deleteRequest).then((response)=>{response.json().then(json => {\r\n            if (json.success === true){  // recipe or chapter deleted - close this window and redisplay cookbook\r\n                this.props.showDeleteChapterRecipeDialog(false);\r\n                this.props.rerenderCookbook();\r\n            } else {  // show error\r\n                this.setState({\r\n                    errorMsg: json.message\r\n                })\r\n            }\r\n        })})\r\n        .catch(error=>{  // fetch error\r\n            let logErrorRequest = this.createRequest.createRequestWithBody(\"/api/log\", \"POST\", JSON.stringify({text: error}));\r\n            fetch(logErrorRequest);\r\n        });\r\n\r\n    }\r\n\r\n\r\n    cancelDelete = () => {\r\n            this.props.showDeleteChapterRecipeDialog(false);\r\n    }\r\n\r\n\r\n    render(){\r\n        return (\r\n            <div id=\"dialog-background\">\r\n                <ClickAwayListener\r\n                    onClickAway={() => {this.props.showDeleteChapterRecipeDialog(false)}}\r\n                >\r\n                    <div id=\"delete-dialog\" className=\"dialog\">\r\n                        <p className=\"dialog-title\">Delete {this.props.itemTypeToDelete}</p>\r\n                        <div id=\"delete-box\">\r\n                            <br/>\r\n                            <p>Delete {this.props.itemTypeToDelete} {this.props.textToDelete}?</p>\r\n                            {this.props.itemTypeToDelete === 'chapter' && <p className=\"subtext\">All recipes in this chapter will also be deleted</p>}\r\n                            <p className=\"error\" id=\"error\">{this.state.errorMsg}</p>\r\n                        </div>\r\n                        <div className=\"flex-container chapter-btns\">\r\n                            <Button id=\"delete-save\" \r\n                                ref={this.saveBtn}\r\n                                variant=\"contained\"\r\n                                onClick={this.deleteItem}\r\n                            >\r\n                                Delete\r\n                            </Button>\r\n                            <Button \r\n                                id=\"delete-cancel\" \r\n                                variant=\"contained\"\r\n                                onClick={this.cancelDelete}\r\n                            >\r\n                                Cancel\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </ClickAwayListener>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default DeleteChapterRecipeDialog;","import React, { Component } from 'react';\r\nimport { Draggable } from 'react-beautiful-dnd';\r\nimport DescriptionOutlinedIcon from '@material-ui/icons/DescriptionOutlined';\r\nimport './styles/Recipe.css'\r\n\r\nclass Recipe extends Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.recipe = this.props.content;\r\n        this.chapter = this.props.chapter;\r\n        this.notesWindow = null;\r\n\r\n        this.recipeWindow = null;\r\n\r\n        this.createRequest = require('../modules/createRequest.js');\r\n        this.accessNotes = require('../modules/accessNotes.js');\r\n\r\n        this.state = {\r\n            notesOpen: \"false\",\r\n            notesDisabled: false,\r\n            notes: this.props.content.recipeNotes,\r\n        }\r\n\r\n    } // end constructor\r\n\r\n\r\n    showNotes = () => {  // toggle state of notes textarea\r\n        if (this.state.notesOpen === \"false\"){\r\n            this.setState({\r\n                notesOpen: \"true\"\r\n            });\r\n        } else if (this.state.notesOpen === \"true\"){\r\n            this.setState({\r\n                notesOpen: \"false\"\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    displayRecipe = async () => {\r\n        // displays recipe either in new window or iframe in new page\r\n        // check whether page can be opened in iframe before opening in iframe\r\n\r\n        // TODO: i think this will do weird things if i close the main cookbook page while a recipe \r\n        // page is open and then re-open the cookbook page later - check\r\n        let methodChanged = false;\r\n        this.setState({\r\n            notesDisabled: true,\r\n        });\r\n\r\n        if (this.recipe.method === \"iframe\") {  // open in iframe\r\n            // make sure page can still be opened in iframe\r\n            let iframeStillValidRequest = this.createRequest.createRequestWithBody('/api/checkIframe', 'POST', JSON.stringify({\"link\": this.recipe.recipeLink,\r\n                                                                                                                                \"name\": this.recipe.name,\r\n                                                                                                                                \"chapter\": this.props.chapter}));\r\n            await fetch(iframeStillValidRequest).then(response=>response.json().then(json=>{\r\n                if (json.method === 'new_window'){\r\n                    this.recipe.method = json.method;\r\n                    methodChanged = true;\r\n                }\r\n                \r\n            })).catch(error=>{\r\n                let logErrorRequest = this.createRequest.createRequestWithBody(\"/api/log\", \"POST\", JSON.stringify({text: error}));\r\n                fetch(logErrorRequest);\r\n            });\r\n            \r\n            if (methodChanged){  // can no longer open in iframe - send request to server to update asynchronously\r\n                let changeOpeningMethodRequest = this.createRequest.createRequestWithBody('/api/updateRecipeMethod', 'POST', JSON.stringify({\"link\": this.recipe.recipeLink,\r\n                                                                                                                                    \"nameId\": this.recipe.nameId,\r\n                                                                                                                                    \"chapter\": this.props.chapter}));                                                                                  \r\n                fetch(changeOpeningMethodRequest).catch((error)=>{\r\n                    let logErrorRequest = this.createRequest.createRequestWithBody(\"/api/log\", \"POST\", JSON.stringify({text: error}));\r\n                    fetch(logErrorRequest);\r\n                });\r\n            }\r\n\r\n\r\n            // go to recipe page\r\n            if (this.recipe.method === \"iframe\") { // will still open in iframe\r\n                if (this.recipeWindow === null){\r\n                    this.recipeWindow = window.open(`/recipe/${this.props.chapter}/${this.props.content.name}`);\r\n\r\n                    this.recipeWindow.addEventListener(\"unload\", ()=>{\r\n                        if (this.recipeWindow.location.href !== \"about:blank\"){\r\n                            this.setState({\r\n                                notesDisabled: false,\r\n                                notes: this.recipeWindow.document.getElementsByTagName(\"textarea\")[0].value\r\n                            });\r\n                            \r\n                            this.notesWindow = null;\r\n                            this.recipeWindow = null;\r\n                        }\r\n                    });\r\n                } else {\r\n                    this.recipeWindow.focus();\r\n                }\r\n            }\r\n        } \r\n\r\n        if (this.recipe.method === \"new_window\") {  // open in new window\r\n            window.open(this.props.content.recipeLink);\r\n            if (this.notesWindow === null){  // only open notes window once\r\n                this.notesWindow = window.open(`/notes/${this.props.chapter}/${this.props.content.name}`, \"_blank\", \"height=300,width=375,location=0\");\r\n            }\r\n\r\n            // add event listner to re-enable notes on main cookbook when notes window closes\r\n            this.notesWindow.addEventListener(\"unload\", ()=>{  \r\n                if (this.notesWindow.location.href !== \"about:blank\"){\r\n                    this.setState({\r\n                        notesDisabled: false,\r\n                        notes: this.notesWindow.document.getElementsByTagName(\"textarea\")[0].value\r\n                    });\r\n                    \r\n                    this.notesWindow = null;\r\n                }\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    handleNotesChange = (event) => {\r\n        this.accessNotes.updateNotes(event, this.chapter, this.recipe.name); \r\n        this.setState({\r\n            notes: event.target.value\r\n        })\r\n    }\r\n\r\n\r\n    // return Draggable recipe that can be toggled to show notes\r\n    render(){\r\n\r\n        let chapter = this.props.chapter;\r\n        let recipeId = this.props.content.nameId;\r\n        let recipe = this.props.content;\r\n        let dragId = `${chapter}-${recipeId}`;\r\n\r\n        return (\r\n            <Draggable \r\n                key={recipeId} \r\n                draggableId={dragId} \r\n                index={this.props.index}\r\n            >\r\n                {(provided)=>(\r\n                    <div \r\n                        className='recipe' \r\n                        ref={provided.innerRef} \r\n                        {...provided.draggableProps} \r\n                        {...provided.dragHandleProps}\r\n                    >\r\n                        <div>\r\n                            <a \r\n                                className=\"no-link-decoration\"\r\n                            >\r\n                                <li \r\n                                    recipetype={this.props.content.method} \r\n                                    chaptername={chapter} \r\n                                    link={recipe.recipeLink} \r\n                                    itemType=\"recipe\" \r\n                                    onClick={()=>{this.displayRecipe()}} \r\n                                    onContextMenu={(event)=>{this.props.sendRightClick(event)}}\r\n                                >\r\n                                    {recipe.name}\r\n                                </li>\r\n                            </a>\r\n                            <DescriptionOutlinedIcon\r\n                                alt=\"toggle notes box\" \r\n                                className=\"recipe-icon\"\r\n                                onClick={()=>{this.showNotes()}}\r\n                            ></DescriptionOutlinedIcon>\r\n                        </div>\r\n                        <textarea \r\n                            className=\"cookbook-notes\" \r\n                            notesopen={this.state.notesOpen} \r\n                            disabled={this.state.notesDisabled} \r\n                            value={this.state.notes} \r\n                            onChange={this.handleNotesChange}\r\n                        ></textarea>\r\n                    </div>\r\n                )}\r\n            </Draggable>\r\n        );\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default Recipe;","import React, { Component } from 'react';\r\nimport { Droppable } from 'react-beautiful-dnd';\r\nimport Recipe from './Recipe.js';\r\nimport './styles/Chapter.css'\r\n\r\nclass Chapter extends Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        // create refs for manipulation\r\n        this.chapterRef = React.createRef();\r\n        this.recipesRef = React.createRef();\r\n\r\n    } // end of constructor\r\n\r\n\r\n    toggleChapter(){  // sets chapter open or closed\r\n        const recipesNode = this.recipesRef.current;\r\n        const chapterNode = this.chapterRef.current;\r\n\r\n        if (chapterNode.getAttribute(\"chapterExpanded\") === \"true\"){\r\n            recipesNode.setAttribute(\"chapterOpen\", \"false\");\r\n            chapterNode.setAttribute(\"chapterExpanded\", \"false\");\r\n        } else if (chapterNode.getAttribute(\"chapterExpanded\") === \"false\"){\r\n            recipesNode.setAttribute(\"chapterOpen\", \"true\");\r\n            chapterNode.setAttribute(\"chapterExpanded\", \"true\");\r\n        }\r\n    }\r\n\r\n    // returns Droppable chapter with recipes mapped to Recipe components\r\n    render(){\r\n        let chapterExpanded;\r\n        if (this.props.recipes.length === 0){  // if no recipes, don't show toggle \r\n            chapterExpanded=\"none\";\r\n        } else {  // otherwise expand chapter\r\n            chapterExpanded=\"true\";\r\n        }\r\n\r\n\r\n        return (\r\n            <Droppable droppableId={this.props.name}>\r\n                {(provided) => (\r\n            <div {...provided.droppableProps} ref={provided.innerRef} className=\"droppable-div\" >\r\n                <li itemType=\"chapter\" \r\n                    ref={this.chapterRef} \r\n                    chapterexpanded={chapterExpanded} \r\n                    onClick={()=>{this.toggleChapter();}}  \r\n                    onContextMenu={(event)=>{this.props.rightClick(event); event.preventDefault();}} \r\n                >\r\n                    {this.props.name}\r\n                </li>\r\n                <ul ref={this.recipesRef} chapteropen=\"true\">\r\n                    {this.props.recipes.map((recipe, index) => \r\n                        <Recipe \r\n                            content={recipe} \r\n                            key={recipe._id} \r\n                            chapter={this.props.name} \r\n                            index={ index } \r\n                            sendRightClick={(event)=>{this.props.rightClick(event); event.preventDefault();}}\r\n                        />\r\n                    )}\r\n                {provided.placeholder}\r\n                </ul>\r\n            </div>\r\n            )}\r\n            </Droppable>\r\n        );\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default Chapter;","import React, { Component } from \"react\";\r\nimport './styles/CookiePopupWarning.css'\r\n\r\nclass CookiePopupWarning extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            warningAccepted: false,\r\n        };\r\n\r\n        // import module\r\n        this.createRequest = require('../modules/createRequest.js');\r\n    }\r\n\r\n\r\n    acceptWarning = () => {\r\n            let acceptCookieRequest = this.createRequest.createRequest(`/api/acceptCookies`, \"POST\");\r\n            fetch(acceptCookieRequest)\r\n                .catch(error=>{\r\n                    let logErrorRequest = this.createRequest.createRequestWithBody(\"/api/log\", \"POST\", JSON.stringify({text: error}));\r\n                        fetch(logErrorRequest);\r\n                });\r\n            this.props.showCookiePopupWarning(false);\r\n            this.props.acceptCookies(true);\r\n    }\r\n\r\n\r\n    render(){     \r\n        return(\r\n            <div class=\"cookie-popup-warning\">\r\n                <div class=\"btn--close close-cookie-popup-warning\" onClick={ ()=>{this.acceptWarning()}}>&times;</div>\r\n                <div class=\"cookie-popup-warning-text\">This website uses cookies and pop-up windows to function properly. By continuing to use this site, you acknowledge \r\n                that you accept the use of cookies. If your browser blocks pop-up windows, this site may not function properly. \r\n                Please allow pop-ups from this site. We promise to not show pop-up advertisements.</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default CookiePopupWarning;","import fetch from \"node-fetch\";\r\nimport React, { Component } from \"react\";\r\nimport { DragDropContext } from 'react-beautiful-dnd';\r\nimport _ from 'lodash';\r\nimport AddChapterDialog from \"../Components/AddChapterDialog.js\";\r\nimport AddRecipeDialog from \"../Components/AddRecipeDialog.js\";\r\nimport CustomContextMenu from '../Components/CustomContextMenu.js';\r\nimport RenameChapterRecipeDialog from '../Components/RenameChapterRecipeDialog.js';\r\nimport DeleteChapterRecipeDialog from '../Components/DeleteChapterRecipeDialog.js';\r\nimport Header from '../Components/Header.js';\r\nimport Chapter from '../Components/Chapter.js';\r\nimport CookiePopupWarning from '../Components/CookiePopupWarning.js';\r\nimport { InputAdornment, FormControl, TextField } from \"@material-ui/core\";\r\nimport SearchIcon from '@material-ui/icons/Search'\r\nimport AddCircleSharpIcon from '@material-ui/icons/AddCircleSharp';\r\nimport './styles/Cookbook.css'\r\n\r\n// main cookbook page /main\r\nclass Cookbook extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            showAddChapter: false,\r\n            showAddRecipe: false,\r\n            showContextMenu: false,\r\n            showRename: false,\r\n            showDelete: false,\r\n            textToModify: '',\r\n            itemTypeToModify: '',\r\n            recipeChapter: '',\r\n            searchbarValue: '',\r\n            cookbook: [],\r\n            filteredCookbook: [],\r\n            cookiesAccepted: true,  // default to true for loading purposes\r\n            menuStyle: {\r\n                left: 0,\r\n                top: 0\r\n            }\r\n        };\r\n\r\n        this.createRequest = require('../modules/createRequest.js');\r\n        \r\n        if (window.location.hash === '#_=_'){  // remove chars added after fb login\r\n            window.location.hash = '';\r\n        }\r\n\r\n        this.body = document.getElementsByTagName('body')[0];\r\n        this.customContextMenu = React.createRef();\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.getCookbook();\r\n        this.checkCookieAcceptance();\r\n    }\r\n\r\n    displayAddChapterWindow = (bool) => {\r\n        this.setState({\r\n            showAddChapter: bool,\r\n        });\r\n    }\r\n\r\n    displayAddRecipeWindow = (bool) => {\r\n        this.setState({\r\n            showAddRecipe: bool,\r\n        });\r\n    }\r\n\r\n    displayContextMenu = (bool) => {\r\n        this.setState({\r\n            showContextMenu: bool,\r\n        });\r\n    }\r\n\r\n    displayRenameDialog = (bool) => {\r\n        this.setState({\r\n            showRename: bool,\r\n        });\r\n    }\r\n\r\n    displayDeleteDialog = (bool) => {\r\n        this.setState({\r\n            showDelete: bool,\r\n        });\r\n    }\r\n\r\n\r\n    // get all chapters and recipes\r\n    getCookbook = async () => {\r\n       let recipeRequest = this.createRequest.createRequest(\"/api/recipes\", \"GET\");\r\n       fetch(recipeRequest).then(\r\n           (response)=> { response.json().then(\r\n               (json)=>{\r\n                this.setState({\r\n                    cookbook: json.recipes,\r\n                });\r\n               })\r\n           }).catch(error=>{\r\n                let logErrorRequest = this.createRequest.createRequestWithBody(\"/api/log\", \"POST\", JSON.stringify({text: error}));\r\n                fetch(logErrorRequest);\r\n            });\r\n   }\r\n    \r\n   \r\n    rerenderCookbook = () => {  // called to re-display cookbook after a change\r\n        this.getCookbook();     \r\n    }\r\n\r\n    filterCookbook = (filterText) => {\r\n        // returns a version of the cookbook that contains only entries that contain the filterText\r\n\r\n        let searchText = filterText.toLowerCase();\r\n\r\n        // create a clone of the copy to leave original unaffected \r\n        let cookbookCopy = _.cloneDeep(this.state.cookbook);  \r\n\r\n\r\n        let filteredCookbook = [];  // start with empty cookbook and add\r\n\r\n        for (let i=0; i<cookbookCopy.length; i++){  // iterate through chapters in cookbook copy\r\n            if (cookbookCopy[i].chapterName.toLowerCase().indexOf(searchText) >= 0){ // search text is in chapter name\r\n                filteredCookbook.push(cookbookCopy[i]);  // add entire chapter\r\n            } else {\r\n                let recipes = cookbookCopy[i].recipes;\r\n                for (let j=0; j<recipes.length; j++){ // loop through recipes in chapter to check for match\r\n                    if (recipes[j].name.toLowerCase().indexOf(searchText) >= 0){ // search text is in recipe name\r\n                        if (filteredCookbook.length === 0 || filteredCookbook[filteredCookbook.length-1].chapterName !== cookbookCopy[i].chapterName){ // chapter is not already in filtered cookbook\r\n                            filteredCookbook.push(cookbookCopy[i]); // add entire chapter\r\n                            filteredCookbook[filteredCookbook.length-1].recipes = [];  // remove all recipes from chapter\r\n                        } \r\n                            filteredCookbook[filteredCookbook.length-1].recipes.push(recipes[j]); // add recipe\r\n\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            filteredCookbook: filteredCookbook\r\n        });\r\n\r\n    }\r\n\r\n    showMenu = (event) => {\r\n        this.displayContextMenu(false);  // hide menu before it's shown again\r\n\r\n        this.setState({\r\n            textToModify: event.target.innerText,\r\n            itemTypeToModify: event.target.getAttribute('itemType'),\r\n            menuStyle: {  // set position of context menu to be where user clicked\r\n                top: event.clientY,\r\n                left: event.clientX\r\n            }\r\n        });\r\n\r\n        if (event.target.getAttribute('itemType') === 'recipe'){  // set chapter for recipe to find more easily\r\n            this.setState({\r\n                recipeChapter: event.target.getAttribute('chaptername')\r\n            });\r\n        }\r\n\r\n        this.displayContextMenu(true);\r\n\r\n    }\r\n\r\n    handleSearchBarChange = (event) => {  \r\n        // update value in search bar as user types and filter the cookbook\r\n        this.setState({\r\n            searchbarValue: event.target.value\r\n        });\r\n        this.filterCookbook(event.target.value);\r\n    }\r\n\r\n    handleOnDragEnd = async (result) => {\r\n        if (!result.destination){\r\n            return;\r\n        }\r\n\r\n        let cookbookCopy = _.cloneDeep(this.state.cookbook);\r\n\r\n        let oldChapter = cookbookCopy.find((chapter) => {  // find chapter where recipe started\r\n            return chapter.chapterName === result.source.droppableId;\r\n        });\r\n\r\n        let recipeIndex = result.source.index;\r\n        let newRecipeIndex = result.destination.index;\r\n        \r\n        let recipe = oldChapter.recipes[recipeIndex];  // get recipe that was moved\r\n\r\n        let newChapter = cookbookCopy.find((chapter) => {  // find the chapter the recipe is being moved to\r\n            return chapter.chapterName === result.destination.droppableId;\r\n        });\r\n\r\n        // make sure the moved recipe is not already in the new chapter (same nameid)\r\n        let duplicateRecipe = newChapter.recipes.find((nRecipe)=>{\r\n            return recipe.name === nRecipe.name;\r\n        });\r\n        if (duplicateRecipe){\r\n            return;\r\n        }\r\n\r\n        if (result.source.droppableId === result.destination.droppableId){  // recipe being moved in same chapter\r\n            let recipeCopy = _.cloneDeep(recipe); // create deep clone of recipe to move it independently\r\n            if (result.source.index > result.destination.index){  // being moved up\r\n                oldChapter.recipes.splice(recipeIndex, 1);  // remove the recipe from the original chapter\r\n                newChapter.recipes.splice(newRecipeIndex, 0, recipeCopy);  // add recipe where it was dropped   \r\n            } else if (result.source.index < result.destination.index){  // being moved back\r\n                newChapter.recipes.splice(recipeIndex,1);  // insert the recipe into the new chapter\r\n                newChapter.recipes.splice(newRecipeIndex,0,recipeCopy); // remove the recipe from the old chapter\r\n            }\r\n        } else {\r\n            oldChapter.recipes.splice(recipeIndex, 1);  // remove the recipe from the original chapter\r\n            newChapter.recipes.splice(newRecipeIndex, 0, recipe);  // add recipe where it was dropped\r\n        }\r\n\r\n        this.setState({  // update the state so the cookbook will re-render\r\n            cookbook: cookbookCopy,\r\n        });\r\n            \r\n        // it takes longer to update cookbook in the database, so do this separately and asynchronously\r\n        let changeChapterRequest = this.createRequest.createRequest(`/api/recipe/move/${result.source.droppableId}/${recipeIndex}/${result.destination.droppableId}/${newRecipeIndex}`, 'PUT');\r\n        fetch(changeChapterRequest).then((response)=>{\r\n            response.json().then((json) => {\r\n                ;\r\n            }).catch((error)=>{\r\n                let logErrorRequest = this.createRequest.createRequestWithBody(\"/api/log\", \"POST\", JSON.stringify({text: error}));\r\n                fetch(logErrorRequest);\r\n            });\r\n        });\r\n        \r\n    }\r\n\r\n    checkCookieAcceptance = () => {\r\n        let checkCookieRequest = this.createRequest.createRequest(`/api/checkCookieAcceptance`, \"GET\");\r\n        fetch(checkCookieRequest)\r\n            .then((response)=>{\r\n                response.json().then((json)=>{\r\n                    if (json.success){ \r\n                        this.setState(\r\n                            { cookiesAccepted: json.cookiesAccepted\r\n                            }\r\n                        )\r\n                    }\r\n                })\r\n            });\r\n    }\r\n\r\n    showCookiePopupWarning = (bool) => {\r\n        if (!bool){\r\n            this.setState({\r\n                cookiesAccepted: true\r\n            });\r\n        }\r\n    }\r\n\r\n \r\n\r\n    // return main cookbook with DragDropContext\r\n    render(){\r\n        let cookbook;\r\n\r\n        // choose which cookbook to use\r\n        if (this.state.searchbarValue === ''){\r\n            cookbook = this.state.cookbook;\r\n        } else {\r\n            cookbook = this.state.filteredCookbook;\r\n        }\r\n\r\n\r\n        return (\r\n            <div className=\"App\">\r\n                <Header />\r\n                <div id=\"dialogWindow\">\r\n                    {this.state.showAddChapter && \r\n                        <AddChapterDialog \r\n                            showAddChapterDialog={this.displayAddChapterWindow} \r\n                            rerenderCookbook={this.rerenderCookbook}\r\n                        />\r\n                    }\r\n                    {this.state.showAddRecipe && \r\n                        <AddRecipeDialog \r\n                            showAddRecipeDialog={this.displayAddRecipeWindow} \r\n                            rerenderCookbook={this.rerenderCookbook}\r\n                        />\r\n                    }\r\n                </div>\r\n                <div id=\"customContextMenu\"\r\n                    ref={this.customContextMenu}\r\n                    style={this.state.menuStyle}\r\n                >\r\n                    {this.state.showContextMenu && \r\n                        <CustomContextMenu \r\n                            showContextMenu={this.displayContextMenu} \r\n                            renameItem={(bool) => {this.displayRenameDialog(bool)}} \r\n                            deleteItem={this.displayDeleteDialog}\r\n                        />\r\n                    }\r\n                </div>\r\n                <div id=\"smallDialogWindow\">\r\n                    {this.state.showRename && \r\n                        <RenameChapterRecipeDialog \r\n                            showRenameChapterRecipeDialog={this.displayRenameDialog} \r\n                            itemTypeToModify={this.state.itemTypeToModify} \r\n                            textToModify={this.state.textToModify} \r\n                            recipeChapter={this.state.recipeChapter} \r\n                            rerenderCookbook={this.rerenderCookbook} \r\n                        />\r\n                    }\r\n                    {this.state.showDelete && \r\n                        <DeleteChapterRecipeDialog \r\n                            showDeleteChapterRecipeDialog={this.displayDeleteDialog} \r\n                            itemTypeToDelete={this.state.itemTypeToModify} \r\n                            textToDelete={this.state.textToModify} \r\n                            recipeChapter={this.state.recipeChapter} \r\n                            rerenderCookbook={this.rerenderCookbook} \r\n                        />\r\n                    }\r\n                </div>\r\n\r\n                {/* pull the search out */}\r\n                    <FormControl\r\n                        id=\"search-bar\">\r\n                        <TextField\r\n                            placeholder=\"Search recipes\" \r\n                            value={this.state.searchbarValue} \r\n                            onChange={this.handleSearchBarChange}\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                            InputProps={{\r\n                                startAdornment: (\r\n                                    <InputAdornment className=\"search-icon\" position=\"start\">\r\n                                        <SearchIcon />\r\n                                    </InputAdornment>\r\n                                )\r\n                            }}\r\n                        />\r\n                    </FormControl>\r\n                \r\n                <div id=\"cookbook\">\r\n                    <DragDropContext onDragEnd={this.handleOnDragEnd}>\r\n                    { cookbook.length > 0 &&\r\n                       <ul>\r\n                                { cookbook.map((chapter, index) => \r\n                                    <Chapter \r\n                                        name={chapter.chapterName} \r\n                                        recipes={chapter.recipes} \r\n                                        rightClick={ (event)=>{this.showMenu(event);} } \r\n                                        index={index}\r\n                                        key={index}\r\n                                    />\r\n                                )} \r\n                        \r\n                        </ul>\r\n                    }    \r\n                    { (cookbook.length === 0 && this.state.searchbarValue !== '') &&\r\n                       <div id=\"empty-search-results\">No recipes found</div>\r\n                    }         \r\n                     </DragDropContext>  \r\n\r\n                </div>\r\n                {!this.state.cookiesAccepted && \r\n                    <CookiePopupWarning \r\n                        accepted={this.state.cookiesAccepted} \r\n                        acceptCookies={(value)=>{this.setState({cookiesAccepted: value});}}\r\n                        showCookiePopupWarning={(bool) => {this.showCookiePopupWarning(bool)}}\r\n                    />\r\n                }\r\n                <div className=\"add-bar flex-container\">\r\n                    <div \r\n                        id=\"add-chapter\" \r\n                        className=\"btn--add\" \r\n                        onClick={() => this.displayAddChapterWindow(true)}\r\n                    >\r\n                        <div className=\"add-sign\"><AddCircleSharpIcon/></div>\r\n                        \r\n                        Add chapter\r\n                    </div>\r\n                    \r\n                    <div \r\n                        id=\"add-recipe\" \r\n                        className=\"btn--add\" \r\n                        onClick={()=>{ this.displayAddRecipeWindow(true) }}\r\n                    >\r\n                        <div className=\"add-sign\"><AddCircleSharpIcon/></div>\r\n                        \r\n                        Add recipe\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default Cookbook;","import React, { Component } from \"react\";\r\nimport Header from '../Components/Header.js';\r\nimport './styles/Notes.css'\r\n\r\nclass Notes extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            notes: ''\r\n        }\r\n\r\n        // import modules\r\n        this.createRequest = require('../modules/createRequest.js');\r\n        this.accessNotes = require('../modules/accessNotes.js');\r\n\r\n        // get notes from db\r\n        this.getNotes();\r\n\r\n    }\r\n\r\n    getNotes = () => { \r\n        let getNotesRequest = this.createRequest.createRequest(`/api/recipe/notes/${this.props.match.params.chapter}/${this.props.match.params.recipeName}`, \"GET\");\r\n        fetch(getNotesRequest).then(\r\n            async (response) => {\r\n                await response.json().then(\r\n                    (json)=>{\r\n                        this.setState({\r\n                            notes: json.notes,\r\n                        });\r\n                    });\r\n        }).catch((error)=>{\r\n            let logErrorRequest = this.createRequest.createRequestWithBody(\"/api/log\", \"POST\", JSON.stringify({text: error}));\r\n            fetch(logErrorRequest);\r\n        });\r\n\r\n    }\r\n \r\n\r\n\r\n    render(){    \r\n        let chapter = this.props.match.params.chapter;\r\n        let recipeName = this.props.match.params.recipeName;\r\n\r\n        return (\r\n            <div className=\"notes-window\">\r\n                <Header type=\"mini-header\" />\r\n                <div className=\"notes-title\">Notes: { this.props.match.params.chapter} &gt;&gt; { recipeName }</div>\r\n                <textarea className=\"notes-popup\" value={this.state.notes} onChange={(event)=>{this.accessNotes.updateNotes(event, chapter, recipeName); this.setState({notes: event.target.value});}}></textarea>\r\n\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default Notes;","import React, { Component } from 'react';\r\nimport './styles/NotFound.css'\r\n\r\n// show for invalid route\r\nclass NotFound extends Component {\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"App\">\r\n                <span id=\"not-found\">Looks like that page is missing!</span>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default NotFound;","import fetch from \"node-fetch\";\r\nimport React, { Component, Fragment } from \"react\";\r\nimport Header from '../Components/Header.js';\r\nimport NotFound from '../pages/NotFound';\r\nimport './styles/Page.css'\r\n\r\n// page that displays recipe and notes\r\n//to replace recipe page\r\nclass Page extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            notes: '',\r\n            url: '',\r\n            name: '',\r\n            chapter: this.props.match.params.chapter,\r\n            recipeName: this.props.match.params.recipeName,\r\n            recipeIsValid: true\r\n        };\r\n\r\n        // import modules\r\n        this.createRequest = require('../modules/createRequest.js');\r\n        this.accessNotes = require('../modules/accessNotes.js');\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n        // get recipe link and name and notes from db\r\n        this.getRecipe();\r\n    }\r\n\r\n    getRecipe = () => {\r\n        let getNotesRequest = this.createRequest.createRequest(`/api/recipe/${this.state.chapter}/${this.state.recipeName}`, \"GET\");\r\n        fetch(getNotesRequest).then(\r\n            async (response) => {\r\n                await response.json().then(\r\n                    (json)=>{\r\n                        if (json.success){  // request for recipe successful, set state to reload\r\n                            this.setState({\r\n                                notes: json.recipe.recipeNotes,\r\n                                url: json.recipe.recipeLink,\r\n                                name: json.recipe.name\r\n                            });\r\n                        } else {\r\n                            // can't get notes - use as proxy for recipe not being in cookbook\r\n                            this.setState({\r\n                                recipeIsValid: false\r\n                            })\r\n                        }\r\n                    });\r\n        }).catch((error)=>{\r\n            let logErrorRequest = this.createRequest.createRequestWithBody(\"/api/log\", \"POST\", JSON.stringify({text: error}));\r\n            fetch(logErrorRequest);\r\n        });\r\n\r\n    }\r\n\r\n\r\n \r\n\r\n    render(){\r\n        if (this.state.recipeIsValid){\r\n            return (                \r\n                <Fragment >\r\n                    <Header />\r\n                    <div className=\"page-notes-title\">\r\n                        { this.state.chapter} &gt;&gt; { this.state.name }\r\n                    </div>\r\n                    <div className=\"page-content\">\r\n                        <iframe src={this.state.url} title=\"recipe-frame\"></iframe>\r\n                        <textarea \r\n                            className=\"page-notes\" \r\n                            value={this.state.notes} \r\n                            onChange={(event)=>{this.accessNotes.updateNotes(event, this.state.chapter, this.state.recipeName); this.setState({notes: event.target.value});}}\r\n                        >\r\n                        </textarea>\r\n                    </div>\r\n                </Fragment>\r\n            );\r\n        } else {\r\n            return (\r\n                <NotFound />\r\n            );\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Page;","import React, { Component } from 'react';\r\nimport Header from '../Components/Header.js';\r\nimport googleLogo from '../../Images/g-logo.png';\r\nimport facebookLogo from '../../Images/facebook-logo.png'\r\nimport { Grid, Paper, TextField, Button } from '@material-ui/core'\r\n\r\n\r\nclass Login extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            emailValue: '',\r\n            passwordValue: '',\r\n            errorText: '',\r\n            error: {\r\n                email: false,\r\n                password: false\r\n            }\r\n        }\r\n\r\n        this.emailRef = React.createRef();\r\n        this.loginBtnRef = React.createRef();\r\n\r\n        // import modules\r\n        this.md5 = require('md5');  // for hashing password before it is sent to the server\r\n        this.checkInput = require(\"../modules/checkInput.js\");\r\n        this.createRequest = require('../modules/createRequest.js');\r\n        \r\n    }\r\n\r\n    componentDidMount(){\r\n        document.addEventListener(\"keyup\", this.hitEnter);\r\n        let emailInput = this.emailRef.current.childNodes[1].childNodes[0];\r\n        emailInput.focus(); // put cursor in email box when page loads\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        document.removeEventListener(\"keyup\", this.hitEnter);\r\n    }\r\n\r\n    hitEnter = (event) => {\r\n        if (event.key === \"Enter\"){\r\n            this.loginBtnRef.current.click(); // click login button\r\n        }\r\n    }\r\n    \r\n\r\n    googleLogin = () => { // send to path to redirect through Google\r\n        window.location=`${process.env.REACT_APP_SITE_ADDRESS}/auth/google`;\r\n    }\r\n\r\n    facebookLogin = () => {  // send to path to redirect through Facebook\r\n        window.location=`${process.env.REACT_APP_SITE_ADDRESS}/auth/facebook`;\r\n    }\r\n\r\n    // for username/password\r\n    localLogin = () => {\r\n        if (!this.checkInput.isValidEmail(this.state.emailValue)){\r\n            this.setState({\r\n                errorText: \"Please enter a valid email address\",\r\n                error: {\r\n                    email: true\r\n                }\r\n            })\r\n        } else if (!this.checkInput.isValidPassword(this.state.passwordValue)){\r\n            this.setState({\r\n                errorText: \"Please enter a valid password\",\r\n                error: {\r\n                    password: true\r\n                }\r\n            })\r\n        } else {\r\n            let md5Password = this.md5(this.state.passwordValue);\r\n            let loginRequest = this.createRequest.createRequestWithBody('/auth/login', 'POST', JSON.stringify({\"username\": this.state.emailValue,\r\n                                                                                                                \"password\": md5Password}));\r\n            fetch(loginRequest)\r\n            .then((response)=> {response.json().then((json)=>{\r\n                if (json.success){  // login was successful, redirect to main\r\n                    window.location = `${process.env.REACT_APP_SITE_ADDRESS}/main`;\r\n                } else {\r\n                    this.setState({\r\n                        errorText: 'Your email address or password is incorrect'\r\n                    })\r\n                }\r\n            })}).catch((error)=>{  // login was not successful\r\n                let logErrorRequest = this.createRequest.createRequestWithBody(\"/api/log\", \"POST\", JSON.stringify({text: error}));\r\n                fetch(logErrorRequest);\r\n                this.setState({\r\n                    errorText: 'An error occured'\r\n                })\r\n            });   \r\n        }\r\n    }\r\n\r\n\r\n    handleEmailChange = (event) => {\r\n        this.setState({\r\n            emailValue: event.target.value\r\n        });\r\n    }\r\n\r\n    handlePasswordChange = (event) => {\r\n        this.setState({\r\n            passwordValue: event.target.value\r\n        });\r\n    }\r\n\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"App\">\r\n                <Header />\r\n                <h1 className=\"pageTitle\">Log in</h1>\r\n                <Paper \r\n                    elevation = {10}\r\n                    className=\"gray-container-box login-container\"\r\n                >\r\n                    <h3>Sign in to continue</h3>  \r\n                    <div className=\"login-box\">   \r\n                        <Grid\r\n                            container\r\n                            direction=\"row\"\r\n                            justify=\"center\"\r\n                        >\r\n                            <TextField\r\n                                variant=\"outlined\"\r\n                                size=\"small\"\r\n                                className=\"form-control\"\r\n                                id=\"email\"\r\n                                label=\"Email address\"\r\n                                ref={this.emailRef}\r\n                                onChange={this.handleEmailChange}\r\n                                error={this.state.error.email}\r\n                            >\r\n                            </TextField>\r\n                            <TextField\r\n                                variant=\"outlined\"\r\n                                size=\"small\"\r\n                                className=\"form-control\"\r\n                                id=\"password\"\r\n                                label=\"Password\"\r\n                                type=\"password\"\r\n                                onChange={this.handlePasswordChange}\r\n                                error={this.state.error.password}\r\n                            >\r\n                            </TextField>\r\n                            <p className=\"error\">{this.state.errorText}</p>\r\n                            <Button\r\n                                variant=\"contained\"\r\n                                className=\"form-control btn btn--yellow\"\r\n                                ref={this.loginBtnRef}\r\n                                size=\"large\"\r\n                                onClick={ this.localLogin }\r\n                            >\r\n                            Log in\r\n                        </Button>\r\n\r\n                        <Button\r\n                            variant=\"contained\"\r\n                            className=\"form-control btn btn--white\"\r\n                            size=\"small\"\r\n                            onClick={ this.googleLogin }\r\n                        >\r\n                            <img src={ googleLogo } alt=\"Google login\"></img><div className=\"login-btn-text\">Sign in with Google</div>\r\n                        </Button>\r\n                        <Button\r\n                            variant=\"contained\"\r\n                            className=\"form-control\"\r\n                            id=\"facebook-btn\"\r\n                            onClick={ this.facebookLogin }\r\n                        >\r\n                           <img src={ facebookLogo } alt=\"Facebook login\"></img><div className=\"login-btn-text\">Login with Facebook</div>\r\n                        </Button>\r\n                        </Grid>\r\n                    </div>\r\n                </Paper>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Login;","import React, { Component } from 'react';\r\nimport Header from '../Components/Header.js';\r\nimport googleLogo from '../../Images/g-logo.png';\r\nimport facebookLogo from '../../Images/facebook-logo.png';\r\nimport { Paper, Grid, Button, TextField } from '@material-ui/core';\r\nimport './styles/SignupLogin.css';\r\n\r\n\r\n\r\n// error outlines not working\r\n\r\nclass Signup extends Component { \r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            firstName: '',\r\n            email: '',\r\n            password: '',\r\n            confirmPassword: '',\r\n            errorText: '',\r\n            error: {\r\n                firstName: false,\r\n                email: false,\r\n                password: false,\r\n                confirm: false\r\n            }\r\n        }\r\n    \r\n        this.firstNameRef = React.createRef();\r\n        this.signupBtnRef = React.createRef();\r\n\r\n        // import modules\r\n        this.md5 = require('md5');\r\n        this.checkInput = require('../modules/checkInput.js');\r\n        this.createRequest = require('../modules/createRequest.js');\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n        document.addEventListener(\"keyup\", this.hitEnter);\r\n        let firstNameInput = this.firstNameRef.current.childNodes[1].childNodes[0];\r\n        firstNameInput.focus();  // put cursor in name box on page load\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        document.removeEventListener(\"keyup\", this.hitEnter)\r\n    }\r\n\r\n    hitEnter = (event) => {\r\n        if (event.key === \"Enter\"){\r\n            this.signupBtnRef.current.click();  // click sign-up button\r\n        }\r\n    }\r\n\r\n    googleLogin = () => { // send to path to redirect through Google\r\n        window.location=`${process.env.REACT_APP_SITE_ADDRESS}/auth/google`;\r\n    }\r\n\r\n    facebookLogin = () => {  // send to path to redirect through Facebook\r\n        window.location=`${process.env.REACT_APP_SITE_ADDRESS}/auth/facebook`;\r\n    }\r\n\r\n\r\n\r\n    localSignup = () => {\r\n        this.setState({\r\n            errorText: ''\r\n        })\r\n        if (!this.checkInput.isValidItemName(this.state.firstName)){\r\n            this.setState({\r\n                errorText: \"Please enter a valid name (alphanumeric characters only)\",\r\n                error: { \r\n                    firstName: true\r\n                }\r\n            });\r\n        } else if (!this.checkInput.isValidEmail(this.state.email)){\r\n            this.setState({\r\n                errorText: \"Please enter a valid email address\",\r\n                error: {\r\n                    email: true\r\n                }\r\n            });\r\n        } else if (!this.checkInput.isValidPassword(this.state.password)){\r\n            this.setState({\r\n                errorText: \"Your password must be at least 6 characters and can only contain alphanumeric characters\",\r\n                error: {\r\n                    password: true\r\n                }\r\n            });\r\n        } else if (this.state.password !== this.state.confirmPassword){\r\n            this.setState({\r\n                errorText: \"Passwords must match\",\r\n                error: {\r\n                    confirm: true\r\n                }\r\n            });\r\n        } else {\r\n            let md5Password = this.md5(this.state.password);  // hash password before sending\r\n            let newUserRequest = this.createRequest.createRequestWithBody('/api/signup', 'POST', JSON.stringify({ \"firstName\": this.state.firstName,\r\n                                                                                       \"email\": this.state.email,\r\n                                                                                        \"password\": md5Password}));\r\n            fetch(newUserRequest).then((response) => response.json().then((json) => {\r\n                if (json.success){  // signup successful - redirect to main\r\n                    window.location=`${process.env.REACT_APP_SITE_ADDRESS}/main`;\r\n                } else {\r\n                    this.setState({\r\n                        errorText: json.message\r\n                    })\r\n                }\r\n            })).catch((error) => {\r\n                let logErrorRequest = this.createRequest.createRequestWithBody(\"/api/log\", \"POST\", JSON.stringify({text: error}));\r\n                fetch(logErrorRequest);\r\n                this.setState({\r\n                    errorText: \"An error occured\"\r\n                })\r\n            });\r\n        } \r\n    }\r\n\r\n    handleFirstNameChange = (event) => {\r\n        this.setState({\r\n            firstName: event.target.value\r\n        });\r\n    }\r\n\r\n    handleEmailChange = (event) => {\r\n        this.setState({\r\n            email: event.target.value\r\n        });\r\n    }\r\n\r\n    handlePasswordChange = (event) => {\r\n        this.setState({\r\n            password: event.target.value\r\n        });\r\n    }\r\n\r\n    handleConfirmPasswordChange = (event) => {\r\n        this.setState({\r\n            confirmPassword: event.target.value\r\n        });\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"App\">\r\n                <Header />\r\n                <h1 className=\"pageTitle\">Sign up</h1>\r\n                <Paper \r\n                    className=\"gray-container-box signup-container\"\r\n                    elevation={10} \r\n                >\r\n                    <h3>Create an account</h3>   \r\n                    <div className=\"signup-box\">   \r\n                        <Grid\r\n                            container\r\n                            direction=\"row\"\r\n                            justify=\"center\"\r\n                        >\r\n                            <TextField\r\n                                variant=\"outlined\"\r\n                                size=\"small\"\r\n                                className=\"form-control\"\r\n                                id=\"name\"\r\n                                label=\"First name\"\r\n                                ref={this.firstNameRef}\r\n                                value={this.state.firstName}\r\n                                onChange={this.handleFirstNameChange}\r\n                                error={this.state.error.firstName}\r\n                            >\r\n                            </TextField>\r\n                            <TextField\r\n                                variant=\"outlined\"\r\n                                size=\"small\"\r\n                                className=\"form-control\"\r\n                                id=\"email\"\r\n                                label=\"Email address\"\r\n                                onChange={this.handleEmailChange}\r\n                                error={this.state.error.email}\r\n                            >\r\n                            </TextField>\r\n                            <TextField\r\n                                variant=\"outlined\"\r\n                                size=\"small\"\r\n                                className=\"form-control\"\r\n                                id=\"password\"\r\n                                label=\"Password\"\r\n                                type=\"password\"\r\n                                onChange={this.handlePasswordChange}\r\n                                error={this.state.error.password}\r\n                            >\r\n                            </TextField>\r\n                            <TextField\r\n                                variant=\"outlined\"\r\n                                size=\"small\"\r\n                                className=\"form-control\"\r\n                                id=\"confirm-password\"\r\n                                label=\"Confirm password\"\r\n                                type=\"password\"\r\n                                onChange={this.handleConfirmPasswordChange}\r\n                                error={this.state.error.confirm}\r\n                            >\r\n                            </TextField>\r\n                            <p className=\"error\">{this.state.errorText}</p>\r\n                            <Button\r\n                                variant=\"contained\"\r\n                                className=\"form-control btn btn--white\"\r\n                                id=\"sign-up-btn\"\r\n                                ref={this.signupBtnRef}\r\n                                size=\"large\"\r\n                                onClick={ this.localSignup }\r\n                            >\r\n                                Sign Up\r\n                            </Button>\r\n\r\n                            <Button\r\n                                variant=\"contained\"\r\n                                className=\"form-control btn btn--white\"\r\n                                id=\"google-btn\"\r\n                                size=\"small\"\r\n                                onClick={ this.googleLogin }\r\n                            >\r\n                                <img src={ googleLogo } alt=\"Google login\"></img><div className=\"login-btn-text\">Sign in with Google</div>\r\n                            </Button>\r\n                            <Button\r\n                                variant=\"contained\"\r\n                                className=\"form-control btn\"\r\n                                id=\"facebook-btn\"\r\n                                onClick={ this.facebookLogin }\r\n                            >\r\n                            <img src={ facebookLogo } alt=\"Facebook login\"></img><div className=\"login-btn-text\">Login with Facebook</div>\r\n                            </Button>\r\n                        </Grid>\r\n                    </div> \r\n\r\n                </Paper>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Signup;","import React, { Component } from 'react';\r\nimport {Route, Switch} from 'react-router-dom';\r\nimport './App.css';\r\nimport HowItWorks from \"./pages/HowItWorks\";\r\nimport Home from \"./pages/Home\";\r\nimport Cookbook from \"./pages/Cookbook\";\r\nimport Notes from \"./pages/Notes\";\r\nimport Page from \"./pages/Page\";\r\nimport Login from \"./pages/Login\";\r\nimport Signup from \"./pages/Signup\";\r\nimport NotFound from \"./pages/NotFound\";\r\n\r\n\r\nclass App extends Component {\r\n  render () {\r\n    const App = () => (\r\n      <div>\r\n        <Switch>\r\n          <Route exact path='/' component={ Home } />\r\n          <Route path = '/about' component={ HowItWorks } />\r\n          <Route path = '/main' component={ Cookbook } />\r\n          <Route path = '/notes/:chapter/:recipeName' component={ Notes } />\r\n          <Route path = '/recipe/:chapter/:recipeName' component={ Page } />\r\n          <Route path = '/login' component={ Login } />\r\n          <Route path = '/signup' component={ Signup } />\r\n          <Route path = '/logout' component={ Home } />\r\n          <Route component={ NotFound } />\r\n        </Switch>\r\n      </div>\r\n    )\r\n    return (\r\n      <Switch>\r\n        <App />\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","    import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App/App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom'; \n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n    \n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// templates to create requests both with and without bodies\r\n\r\nfunction createRequest(address, method){ // no body\r\n    return new Request(address, { method: method,\r\n                                    mode: 'cors',\r\n                                    redirect: 'follow',\r\n                                    credentials: 'include',\r\n                                    headers: {\r\n                                        'Content-type': 'application/json',\r\n                                        'Accept': 'application/json'\r\n                                    }  \r\n                                });\r\n}\r\n\r\nfunction createRequestWithBody(address, method, body){  // with body\r\n    return new Request(address, { method: method,\r\n                                    mode: 'cors',\r\n                                    redirect: 'follow',\r\n                                    credentials: 'include',\r\n                                    headers: {\r\n                                        'Content-type': 'application/json',\r\n                                        'Accept': 'application/json'\r\n                                    },\r\n                                    body: body  \r\n                                });\r\n}\r\n\r\nmodule.exports = {\r\n    createRequest: createRequest,\r\n    createRequestWithBody: createRequestWithBody\r\n}","// functions to validate user input\r\n\r\n// public functions\r\nfunction hasInjection(text){ \r\n    if (isAdmin(text)){\r\n        return true;\r\n    } \r\n\r\n    if (hasDollarSign(text)){\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction isValidEmail(email){\r\n    // checks to make sure there is an @ symbol and a . in that order\r\n    if (email.length === 0){\r\n        return false;\r\n    }\r\n\r\n    if (!containsOnlyAlphaNumericDashPeriodAt(email)){\r\n        return false;\r\n    }\r\n\r\n    if ( !((email.indexOf(\".\") > -1 && email.indexOf(\"@\") >-1) && \r\n            email.lastIndexOf(\".\") > email.indexOf(\"@\")) &&\r\n            email.lastIndexOf(\".\") < email.length-1)\r\n        {\r\n        console.log(\"bad formatting\");\r\n        // does not contain . and @\r\n        // there is not a . after @\r\n        // ends in in .\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nfunction isValidPassword(password){\r\n    if (!containsOnlyAlphaNumeric(password)){\r\n        return false;\r\n    }\r\n\r\n    if (password.length < 6){\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nfunction isValidItemName(item){\r\n    if (item.length === 0){\r\n        return false;\r\n    } \r\n    \r\n    if (!containsOnlyAlphaNumericDash(item)){\r\n        return false;\r\n    } \r\n\r\n    return true;\r\n}\r\n\r\nfunction isValidLink(link){\r\n    if (link.length === 0){\r\n        return false;\r\n    }\r\n\r\n    let validLink = RegExp(\"^(http://|https://|http://www.|https://www.|www.){1}[a-z0-9]+([-.]{1}[a-z0-9]+)*.[a-z]{2,5}(:[0-9]{1,5})?(/.*)?$\");\r\n    if (!validLink.test(link)){\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n/// private functions\r\nfunction isAdmin(text){\r\n    if (text.toLowerCase() === 'admin'){\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction hasDollarSign(text){\r\n    if (text.toLowerCase().indexOf('$') >= 0) {\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\n\r\n\r\nfunction containsOnlyAlphaNumeric(string){\r\n    let invalidString = RegExp(/\\W/);\r\n\r\n    if (!invalidString.test(string)){\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction containsOnlyAlphaNumericDash(string){\r\n    // also allows space and apostrophe and double quotes\r\n    let validString = RegExp(/^[\\w- '\"]*$/);\r\n\r\n    if (!validString.test(string)){\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nfunction containsOnlyAlphaNumericDashPeriodAt(string){\r\n    let validString = RegExp(/^[\\w-.@]*$/);\r\n\r\n    if (!validString.test(string)){        \r\n        return false;\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\n\r\nmodule.exports = {\r\n    isValidEmail: isValidEmail,\r\n    isValidPassword: isValidPassword,\r\n    isValidItemName: isValidItemName,\r\n    isValidLink: isValidLink,\r\n    hasInjection: hasInjection\r\n}","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/facebook-logo.1afe9458.png\";","// update notes in db\r\nfunction updateNotes(event, chapter, recipe){\r\n    let createRequest = require('./createRequest.js');\r\n\r\n    let body = JSON.stringify({\r\n        notes: event.target.value,\r\n    });\r\n    let updateNotesRequest = createRequest.createRequestWithBody(`/api/recipes/update_notes/${chapter}/${recipe}`, \"POST\", body);\r\n    fetch(updateNotesRequest)\r\n        .catch(error=>{\r\n            let logErrorRequest = this.createRequest.createRequestWithBody(\"/api/log\", \"POST\", JSON.stringify({text: error.message}));\r\n            fetch(logErrorRequest);\r\n        });\r\n}\r\n\r\nmodule.exports = {\r\n    updateNotes: updateNotes,\r\n}"],"sourceRoot":""}